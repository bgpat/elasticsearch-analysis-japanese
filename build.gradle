apply plugin: 'java'

defaultTasks 'clean', 'build'

repositories {
	mavenCentral()
}

dependencies {
	compile fileTree(dir: 'kuromoji', include: '**/*.jar')
	compile 'commons-io:commons-io:2.5'
	compile 'org.elasticsearch:elasticsearch:5.5.2'
}

task distZip(type: Zip, dependsOn: jar) {
	archiveName = 'elasticsearch-analysis-japanese.zip'
	into('elasticsearch') {
		from jar.archivePath
		from configurations.runtime
		from 'build/resources/main/plugin-descriptor.properties'
		exclude('elasticsearch-5.5.2.jar')
  		exclude('lucene-core-6.6.0.jar')
  		exclude('lucene-analyzers-common-6.6.0.jar')
  		exclude('lucene-backward-codecs-6.6.0.jar')
  		exclude('lucene-grouping-6.6.0.jar')
  		exclude('lucene-highlighter-6.6.0.jar')
  		exclude('lucene-join-6.6.0.jar')
  		exclude('lucene-memory-6.6.0.jar')
  		exclude('lucene-misc-6.6.0.jar')
  		exclude('lucene-queries-6.6.0.jar')
  		exclude('lucene-queryparser-6.6.0.jar')
  		exclude('lucene-sandbox-6.6.0.jar')
  		exclude('lucene-spatial-6.6.0.jar')
  		exclude('lucene-spatial-extras-6.6.0.jar')
  		exclude('lucene-spatial3d-6.6.0.jar')
  		exclude('lucene-suggest-6.6.0.jar')
  		exclude('securesm-1.1.jar')
  		exclude('jopt-simple-5.0.2.jar')
  		exclude('hppc-0.7.1.jar')
  		exclude('joda-time-2.9.5.jar')
  		exclude('snakeyaml-1.15.jar')
  		exclude('jackson-core-2.8.6.jar')
  		exclude('jackson-dataformat-smile-2.8.6.jar')
  		exclude('jackson-dataformat-yaml-2.8.6.jar')
  		exclude('jackson-dataformat-cbor-2.8.6.jar')
  		exclude('t-digest-3.0.jar')
  		exclude('HdrHistogram-2.1.9.jar')
  		exclude('log4j-api-2.8.2.jar')
  		exclude('jna-4.4.0.jar')
	}
}

artifacts {
    archives distZip
}

